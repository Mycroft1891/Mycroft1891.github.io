---
title: Learning pentesting
image: assets/img/pentesting
categories: unix
---

A penetration test, colloquially known as a pen test, pentest or ethical
hacking, is an authorized simulated cyberattack on a computer system, performed
to evaluate the security of the system. The test is performed to identify
both weaknesses (also referred to as vulnerabilities), including the potential
for unauthorized parties to gain access to the system's features and data,
as well as strengths, enabling a full risk assessment to be completed.

> source: [Wikipedia](https://en.wikipedia.org/wiki/Penetration_test)

## Environment Setup

In order to get our pentesting environment setup we need a virtualization
software which will allow us to install [kali](https://www.kali.org) or
[parrot](https://parrotlinux.org) on it. It is best to use a virtualization
software instead of installing it directly on a computer because if the virtual
enviroment gets infected with anything or something brakes we can easily either
rollback or discard the machine entirely.

For our purpose, we will use [virtualbox](https://www.virtualbox.org) for two
reasons. First, its open source and free. Second, it supports more features such
as unlimited snapshots which will come in handy when we want to rollback to a
previous state of our virtual machine.

Quick read: [VMWare vs Virtualbox](http://techgenix.com/virtualbox-vmware-compared/)

## Basic Terminology

In order to get started we first have to cover some basic terminology which we
will use across our pentesting career.

## Learning the Linux terminal

Next we need to learn about the different commands at our disposal when working
on our linux distribution:

[Learning Unix commands](/learning-unix-commands)

## Installing Tor

Tor is a fantastic way of staying anonymous. It routes your traffic through all
the connected devices also called a network. Each node adds a layer of ecryption
making it very tough to track the source of the attack. The ultimate goal is to
**torify** our applications so their access is routed through the tor network
adding all these layers and making us anonymous.

We can install Tor with a single command using the terminal:

```bash
apt-get install tor -y
```

Now, we need to create a user so that we don't navigate as a root user. Type
the command below and follow the steps:

```bash
adduser test #or whatever you want
```

Then we have to change to our newly created user. Now we can download the tor
browser by navigating to the [Tor project](https://torproject.org).

Once we installed the Tor Browser, we can start navigating the dark web. One of
the first things to search for is the **hiddenwiki** which is a place that
archives the onion domains of various usefull websites such as forums.

## Proxychains

In order to work with proxychains we have to do mainly configurations:

```bash
nano /etc/proxychains.conf
```

When working with proxies we have different protocols at our disposal:

- HTTP: HTTP only and not very secure
- SOCKS4: doesn't support IPv6 nor UDP
- SOCKS5: the most secure option

Furthermore we can use different policies:

- dynamic_chain: proxies from a list and skips the ones that aren't available
- strict_chain: proxies from a list but all have to be online or it brakes
- random_chain: changes the proxy for each package.

As we can see, **dynamic_chain** is what we want as its the most robust option.
So comment the **strict_chain** and uncomment the **dynamic_chain** from the config
file.

Among the configurations we have to make sure the **proxy_dns** configuration is
uncommented as this prevents the DNS from leaking. When we access the web our
local ISP accesses a local DNS server to find the IP of the site we are
requesting which will expose the DNS server information. While they can't find
our IP address directly it is possible to figure out our location through our

Now we can start adding proxies to our list inside the config:

```bash
# format
# TYPE  HOST  PORT  USER  PASSWORD
socks5  127.0.0.1  9050
```

We can now see the current status of tor in the terminal and check our
connection:

```bash
# check status
service tor status

# start tor
service tor start

# check connection
proxychains firefox www.ecosia.org

# use proxychains for anything (nmap, firefox, etc.)
proxychains programName
```

We are ready to add proxies to our proxychain now. A simple search for free
proxies will give us a lot of sites that host large lists of proxies which we
can copy/paste into our configuration file at the bottom following the specified
format. Its important to keep in mind that the more proxies we add to our
proxychains our connection will be incredibly slow. A good number is between
2-5.

## Working with VPNs

To begin, we will configure our DNS settings.

```bash
nano /etc/dhcp/dhclient.conf

# inside the file uncomment this line and add a public DNS server such as
# www.opendns.com and save the file
prepend domain-name-servers IP_ADDR_01, IP_ADDR_02;

# restart your network-manager
service network-manager restart

# check that the DNS servers have been added
cat /etc/resolv.conf
```

Now that we have our DNS server setup we have to disable WebRTC in our browser.
For that we open it and go type **about:config** in the search bar. Once the
menu opens, search for **media.peerconnection.enabled** and make sure its set to
false. We are to download a free VPN like [vpnbook.com](www.vpnbook.com). Before
we installing it make sure that the browser is completly closed and open the
terminal.

Navigate to the directory where the vpn downloaded.

```bash
cd Downloads/

unzip vpn_book_file.zip

# start vpn service
openvpn vpnbook-whatever.ovpn
```

## Mac Addresses

The mac address is the address of the network/wireless card and it can be used
to indentify us. A typical address looks like this: **08:00:27:03:5a:75**. The
first 3 sets **08:00:27** represent the manufaturer of the card. The second set
of 3 is created by the manufecturer and don't mean anything in particular. The
mac address is only accessible from the local network. It can be used to
restrict access or identify our computer. The good news is that its possible
to change our mac address either manually or with a software.

```bash
# access the mac address
ifconfig

en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
  options=400<CHANNEL_IO>
  ether a8:66:7f:37:18:cf
  ...
p2p0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 2304
  options=400<CHANNEL_IO>
  ether 0a:66:7f:37:18:cf
  ...

# show mac address with macchanger
macchanger --show en0
Current MAC: 08:00:27:03:5a:75
Permanent MAC: 08:00:27:03:5a:75

# change mac address with macchanger
# use --random, --mac or --another
macchanger --mac 08:00:27:03:5a:ff
```
